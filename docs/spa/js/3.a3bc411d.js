(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{1605:function(t,e,a){"use strict";a("6f35")},"3b31":function(t,e,a){},5746:function(t,e,a){"use strict";a("3b31")},"62bd":function(t,e,a){"use strict";a("bf66")},"6f35":function(t,e,a){},"713b":function(t,e,a){"use strict";a.r(e);a("14d9");var s=function(){var t=this,e=t._self._c;return e("q-layout",{staticClass:"shadow-2",attrs:{view:"lHh Lpr lFf"}},[e("q-header",{staticClass:"header"},[e("q-toolbar",{staticClass:"header--content"},[e("div",{staticClass:"header--logo",on:{click:function(e){return t.$router.push("/")}}},[t.$q.platform.is.mobile?e("img",{staticClass:"header--logo-img",attrs:{src:"dot+_small.png"}}):e("img",{staticClass:"header--logo-img",attrs:{src:"dot+.png"}})]),e("div",{staticClass:"header--input"},[e("q-input",{ref:"searchInput",staticClass:"header--input__big",attrs:{debounce:"500",label:"Pesquisar","bg-color":"white",color:"blue-grey-6",outlined:""},on:{input:t.handleSearchInput},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.text,callback:function(e){t.text=e},expression:"text"}},[e("q-menu",{attrs:{fit:"","no-focus":""},model:{value:t.showOptions,callback:function(e){t.showOptions=e},expression:"showOptions"}},[t.searchOptions.length>0?e("q-list",{staticClass:"header--list",attrs:{bordered:"",dense:"",separator:""}},[e("q-infinite-scroll",{attrs:{offset:t.scrollOffset,throttle:t.scrollThrottle,disabled:t.isLoadingOptions},on:{load:t.loadMoreOptions}},[t._l(t.displayedOptions,(function(a){return e("q-item",{key:a.id,attrs:{clickable:""}},[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",{attrs:{square:""}},[e("img",{attrs:{src:a.poster,alt:"Movie Poster"}})])],1),e("q-item-section",[e("q-item-label",[t._v(t._s(a.title))])],1)],1)})),t.isLoadingOptions?e("q-item",[e("q-item-section",[e("q-spinner-hourglass",{attrs:{color:"primary",size:"24px"}})],1)],1):t._e()],2)],1):t._e()],1)],1)],1),e("div",{staticClass:"header--buttons"},[e("q-btn",{attrs:{icon:"favorite",size:"16px",dense:"",flat:""},on:{click:function(e){t.openFavDrawer=!0}}},[t.favoritesCount>0?e("q-badge",{staticClass:"header--buttons-badge",attrs:{rounded:"",floating:""}},[t._v("\n            "+t._s(t.favoritesCount)+"\n          ")]):t._e()],1),e("q-btn",{staticClass:"q-ml-md",attrs:{icon:"shopping_cart",size:"14px",dense:"",flat:""},on:{click:function(e){t.openCartDrawer=!0}}},[t.cartCount>0?e("q-badge",{staticClass:"header--buttons-badge",attrs:{rounded:"",floating:""}},[t._v(t._s(t.cartCount))]):t._e()],1)],1)])],1),e("Favorites",{attrs:{openFavDrawer:t.openFavDrawer},on:{closeFav:t.closeFavModal}}),e("Cart",{attrs:{openCartDrawer:t.openCartDrawer},on:{closeCart:t.closeCartModal}}),e("q-page-container",[e("router-view")],1)],1)},r=[],i=function(){var t=this,e=t._self._c;return e("q-drawer",{attrs:{width:365,"min-width":500,breakpoint:500,"no-swipe-backdrop":!t.$q.platform.is.mobile,behavior:"mobile",side:"right","content-class":"white",bordered:"",elevated:"","no-swipe-open":"",overlay:""},on:{hide:t.closeFav},model:{value:t.drawerRight,callback:function(e){t.drawerRight=e},expression:"drawerRight"}},[e("q-scroll-area",{staticClass:"fit"},[e("div",{staticClass:"drawer"},[e("div",{staticClass:"drawer-header"},[e("span",{staticClass:"drawer-header--title"},[t._v("Meus Favoritos")]),t.favorites.length>0?e("span",{staticClass:"drawer-header--clear",on:{click:t.clearFavorites}},[t._v("\n          Esvaziar\n        ")]):t._e()])]),e("div",{staticClass:"drawer-content"},t._l(t.favorites,(function(t){return e("div",{key:t.id},[e("MovieInfo",{attrs:{poster:t.poster,title:t.title,date:t.release_date,votes:t.vote_average,id:t.id,hasCart:!0}})],1)})),0)]),e("div",{staticClass:"drawer-close",staticStyle:{top:"5px",right:"10px"}},[e("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"close"},on:{click:t.closeFav}})],1)],1)},o=[],n=a("e8ec"),l=a("e4d4"),c={name:"Favorites",components:{MovieInfo:l["a"]},props:{openFavDrawer:{type:Boolean,default:!1}},data(){return{drawerRight:!1,favorites:[]}},created(){Object(n["d"])(this.loadFavorites)},watch:{openFavDrawer(t){this.drawerRight=t,this.loadFavorites()}},methods:{closeFav(){this.drawerRight=!1,this.$emit("closeFav")},loadFavorites(){const t=localStorage.getItem("favorites");this.favorites=t?JSON.parse(t):[]},clearFavorites(){localStorage.removeItem("favorites"),this.favorites=[]}}},d=c,h=(a("b318"),a("2877")),u=Object(h["a"])(d,i,o,!1,null,"4ecb326c",null),p=u.exports,v=function(){var t=this,e=t._self._c;return e("q-drawer",{attrs:{width:365,"min-width":500,breakpoint:500,"no-swipe-backdrop":!t.$q.platform.is.mobile,side:"right",behavior:"mobile","content-class":"white",bordered:"",elevated:"","no-swipe-open":"",overlay:""},on:{hide:t.closeCart},model:{value:t.drawerRight,callback:function(e){t.drawerRight=e},expression:"drawerRight"}},[e("q-scroll-area",{staticClass:"fit"},[e("div",{staticClass:"drawer"},[e("div",{staticClass:"drawer-header"},[e("span",{staticClass:"drawer-header--title"},[t._v("Meu Carrinho")]),t.cart.length>0?e("span",{staticClass:"drawer-header--clear",on:{click:t.clearCart}},[t._v("Esvaziar")]):t._e()])]),e("div",{staticClass:"drawer-content"},t._l(t.cart,(function(t){return e("div",{key:t.id},[e("MovieInfo",{attrs:{poster:t.poster,title:t.title,date:t.release_date,votes:t.vote_average,id:t.id,quantity:t.quantity,hasCart:!1,gap:"medium"}})],1)})),0),e("div",{staticClass:"drawer-footer"},[e("div",{staticClass:"row drawer-footer-total"},[e("div",{staticClass:"col-2 drawer-footer-total--text"},[t._v("Total:")]),e("div",{staticClass:"col-9 drawer-footer-total--price"},[t._v("R$ "+t._s(t.totalValue))])]),e("q-btn",{staticClass:"full-width drawer-footer-button",attrs:{disable:t.cart.length<=0,label:"Finalizar","no-caps":""},on:{click:function(e){return t.$router.push("/checkout")}}})],1)]),e("div",{staticClass:"drawer-close",staticStyle:{top:"5px",right:"10px"}},[e("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"close"},on:{click:t.closeCart}})],1)],1)},f=[],g={name:"Cart",components:{MovieInfo:l["a"]},props:{openCartDrawer:{type:Boolean,default:!1}},data(){return{drawerRight:!1,cart:[],totalValue:null}},created(){Object(n["c"])(this.loadCart)},watch:{openCartDrawer(t){this.drawerRight=t,this.loadCart()}},methods:{closeCart(){this.drawerRight=!1,this.$emit("closeCart")},loadCart(){const t=localStorage.getItem("cart");this.cart=t?JSON.parse(t):[],this.getTotalPrice()},getTotalPrice(){const t=JSON.parse(localStorage.getItem("cart"))||[],e=t.reduce(((t,e)=>t+9.99*e.quantity),0);this.totalValue=e.toFixed(2)},clearCart(){localStorage.removeItem("cart"),this.cart=[],this.getTotalPrice()}}},m=g,C=(a("5746"),Object(h["a"])(m,v,f,!1,null,"7b3564e4",null)),w=C.exports,b={name:"MainLayout",components:{Favorites:p,Cart:w},data(){return{text:null,openFavDrawer:!1,openCartDrawer:!1,showOptions:!1,searchOptions:[],displayedOptions:[],isLoadingOptions:!1,scrollOffset:200,scrollThrottle:300,favoritesCount:null,cartCount:null}},created(){this.favoritesCount=Object(n["b"])(),this.cartCount=Object(n["a"])(),Object(n["d"])(this.handleFavoritesCountChange),Object(n["c"])(this.handleCartCountChange);const t=localStorage.getItem("guest_session_id"),e=localStorage.getItem("expires_at");t&&new Date(e)>new Date||this.createNewSession()},methods:{handleFavoritesCountChange(t){this.favoritesCount=t},handleCartCountChange(t){this.cartCount=t},createNewSession(){this.$movie.newSession().then((t=>{const{guest_session_id:e,expires_at:a}=t.data;localStorage.setItem("guest_session_id",e),localStorage.setItem("expires_at",a),localStorage.setItem("account_id",19803367),this.creatSession()})).catch((()=>{this.$notifyError("Erro ao criar nova sessÃ£o")}))},closeCartModal(){this.openCartDrawer=!1},closeFavModal(){this.openFavDrawer=!1},handleSearchInput(){this.text?this.$movie.searchMovie({page:1,query:this.text}).then((t=>{this.searchOptions=t.data.results.map((t=>({id:t.id,title:t.title,poster:`https://image.tmdb.org/t/p/original${t.poster_path}`}))),this.displayedOptions=this.searchOptions.slice(0,5)})).catch((()=>{this.$notifyError("Erro ao buscar filmes!")})):(this.searchOptions=[],this.displayedOptions=[])},loadMoreOptions(){const t=this.displayedOptions.length,e=t+5;e<=this.searchOptions.length&&(this.isLoadingOptions=!0,setTimeout((()=>{this.displayedOptions=this.searchOptions.slice(0,e),this.isLoadingOptions=!1}),500))}}},_=b,O=(a("62bd"),Object(h["a"])(_,s,r,!1,null,"7e55d6cc",null));e["default"]=O.exports},b318:function(t,e,a){"use strict";a("dcb4")},bf66:function(t,e,a){},dcb4:function(t,e,a){},e4d4:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"movie-info",class:`movie-info__${t.gap}`},[e("img",{staticClass:"header--logo-img",attrs:{src:`https://image.tmdb.org/t/p/original${t.poster}`,height:t.imgHeight}}),e("div",{staticClass:"movie-info--text-name",class:`movie-info--text-name__${t.nameSize}`},[t._v("\n    "+t._s(t.title)+"\n  ")]),t.hasCart?t._e():e("div",{staticClass:"movie-info--text-quantity"},[t._v(t._s(t.quantity))]),e("div",{staticClass:"movie-info--text-price"},[t._v("R$9,99")]),t.hasCart?e("div",{staticClass:"movie-info--text-icon"},[e("q-btn",{attrs:{flat:"",round:"",color:"teal-5",icon:"shopping_cart",size:"12px"},on:{click:t.addToCart}})],1):t._e(),e("div",{staticClass:"movie-info--text-icon"},[e("q-btn",{attrs:{flat:"",round:"",icon:"delete",size:"12px"},on:{click:t.removeItem}})],1)])},r=[],i=(a("14d9"),{name:"MovieInfo",props:{hasCart:{type:Boolean,default:!1},imgHeight:{type:String,default:"50px"},gap:{type:String,default:"small"},nameSize:{type:String,default:"small"},title:{type:String,default:""},date:{type:String,default:""},poster:{type:String,default:""},genres:{type:String,default:""},votes:{type:Number,default:null},id:{type:Number,default:null},quantity:{type:Number,default:null}},data(){return{drawerRight:!1}},methods:{addToCart(){const t={id:this.id,title:this.title,quantity:1,poster:this.poster};let e=JSON.parse(localStorage.getItem("cart"))||[];const a=e.findIndex((e=>e.id===t.id));-1!==a?e.splice(a,1):e.push(t),this.removeFromFavorites(),localStorage.setItem("cart",JSON.stringify(e))},removeItem(){this.hasCart?this.removeFromFavorites():this.removeFromCart()},removeFromCart(){const t=JSON.parse(localStorage.getItem("cart"))||[],e=t.filter((t=>t.id!==this.id));localStorage.setItem("cart",JSON.stringify(e))},removeFromFavorites(){const t=JSON.parse(localStorage.getItem("favorites"))||[],e=t.filter((t=>t.id!==this.id));localStorage.setItem("favorites",JSON.stringify(e))}}}),o=i,n=(a("1605"),a("2877")),l=Object(n["a"])(o,s,r,!1,null,"c2180f84",null);e["a"]=l.exports},e8ec:function(t,e,a){"use strict";function s(t){let e=r();setInterval((()=>{const a=r();a!==e&&(e=a,t(e))}),1e3)}function r(){const t=JSON.parse(localStorage.getItem("favorites"))||[];return t.length}function i(t){let e=o();setInterval((()=>{const a=o();a!==e&&(e=a,t(e))}),1e3)}function o(){const t=JSON.parse(localStorage.getItem("cart"))||[];return t.length}a.d(e,"d",(function(){return s})),a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return o}))}}]);